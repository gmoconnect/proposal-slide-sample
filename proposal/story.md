# クラウドネイティブアーキテクチャによるWebサービス基盤刷新のご提案

---

> **本書の構成**: エグゼクティブサマリー（結論）→ 現状と課題 → ソリューション → コストと効果 → 実施上の重要ポイント → 長期戦略 → まとめ → 補足資料

---

## セクション1: エグゼクティブサマリー

---

### スライド1: AWSサーバーレス構成により、5つの課題すべてを解決し運用負荷ゼロを実現する

#### 対象評価項目

> **評価項目No.5**: 本システム実現のための最適なクラウドアーキテクチャの提案ができているか。次の観点を含むこと。
> **性能 / 可用性 / コスト / 拡張性 / セキュリティ / 可視化**

#### キーメッセージ

AWSのサーバーレス構成とマネージドサービスを全面的に活用し、6つの評価観点すべてを満たす最適なクラウドアーキテクチャを提案する。現行オンプレミスシステムが抱える5つの構造的課題をすべて解決し、NoOpsモデルへ移行する。

#### 本文

**評価項目No.5への回答: 各課題に対する最適なクラウドアーキテクチャ**

| 現行の課題 | 解決策 | 対応する評価観点 |
|---|---|---|
| ハードウェア故障による可用性低下 | Multi-AZ構成のECS on Fargate + Aurora Serverless v2で単一障害点を排除 | **可用性** |
| 月末アクセス集中とピークコスト | Fargate/Aurora自動スケーリング + CloudFrontキャッシュで従量課金型に転換 | **性能・コスト・拡張性** |
| データベースの拡張性ボトルネック | バイナリデータをS3にオフロード + Aurora自動拡張 + S3ライフサイクルで階層化 | **拡張性・コスト・性能** |
| 日々のオペレーション負荷 | マネージドサービス活用 + Go Distrolessイメージ + CI/CD自動化でNoOps実現 | **セキュリティ・コスト** |
| KPI可視化の欠如 | S3ログ → Athena → QuickSightでリアルタイムダッシュボードを構築 | **可視化** |

提案コンセプト: **「NoOpsでコスト・可用性・性能・セキュリティのバランスをとる」**

#### 図の仕様（デザイナー向け）

- 上部: 評価項目No.5の引用ボックス（6つの評価観点をハイライト）
- レイアウト: 5行×3列の対応表
- 左列: 課題（赤系アイコン + テキスト）
- 中央列: 解決策（AWSサービスアイコン + テキスト）
- 右列: 対応する評価観点（カラーバッジ）
- 左→中央を矢印で接続
- 下部に提案コンセプトをキャッチコピーとして配置

---

### スライド2: 6つの評価観点すべてにおいて、現行システムから定量的に大幅改善する

#### キーメッセージ

6つの評価観点（性能・可用性・コスト・拡張性・セキュリティ・可視化）のすべてにおいて、現行システムから定量的に改善する。

#### 本文

| 評価観点 | Before（現行） | After（提案） |
|---|---|---|
| **性能** | ピーク時に容量不足リスク | ピーク約100倍でもレスポンス安定 |
| **可用性** | 単一DC、手動復旧 | SLA **99.95%以上**、自動フェイルオーバー |
| **コスト** | ピーク構成の固定費用 | 従量課金 + 保管コスト **最大92%削減** |
| **拡張性** | DB 100GB上限 | S3容量無制限、**5年後1TB対応** |
| **セキュリティ** | 手動監視・手動パッチ | CVE対象 **大幅削減**、監視自動化 |
| **可視化** | KPIダッシュボードなし | **リアルタイムBIダッシュボード** |

#### 図の仕様（デザイナー向け）

- レイアウト: 2×3のKPIカード配置
- 各カード: 評価観点名、Before→After の数値ハイライト（プライマリカラー）、改善方向を示すアイコン
- カードにはDiffArrow（改善方向を示す矢印）を付与

---

### アジェンダ: 現状と課題

```
■ 現状と課題 ── ソリューション ── コストと効果 ── 実施上の重要ポイント ── 長期戦略
↑ 現在地
```

---

## セクション2: 現状分析と課題

---

### スライド3: 現行オンプレミスシステムはハードウェア保守期限を迎え、抜本的な基盤刷新が必要である

#### キーメッセージ

現行システムはオンプレミスの3層Webアーキテクチャ（モノリシック構成）で稼働している。ハードウェアの保守期限が迫っており、単純なハードウェア更新ではなく、クラウドへの基盤刷新が求められている。

#### 本文

**現行システム構成:**

- **Web層**: Webサーバー（オンプレミス）
- **AP層**: アプリケーションサーバー（モノリシック構成）
- **DB層**: データベースサーバー（RDBMSに構造化データ＋バイナリデータを格納）

現行の課題:
- すべてのコンポーネントが単一データセンター内に配置されており、データセンター障害時にサービス全体が停止するリスクがある → **利用者の業務停止・信用低下に直結**
- バイナリデータ（画像・PDF等）もすべてRDBMSに格納しており、データ転送がWeb→AP→DBの全層を経由する → **レスポンス遅延による利用者満足度の低下**
- ハードウェア保守期限が到来し、「同等ハードウェアへの更新」か「クラウド移行」かの判断が必要

#### 図の仕様（デザイナー向け）

- レイアウト: 3層アーキテクチャ図
- 上から: ユーザー → Webサーバー → APサーバー → DBサーバー（縦配置）
- すべて「データセンター」の境界ボックス内
- バイナリデータ（画像・PDFアイコン）が全層を通過する太い矢印
- ハードウェアに赤い警告アイコン「保守期限」を付与
- 単一障害点をハイライト

---

### スライド4: 現行システムにはインフラ起因の3つの構造的課題がある

#### キーメッセージ

現行システムの課題はハードウェアの老朽化だけではない。アーキテクチャそのものに起因する構造的課題があり、ハードウェアを新調しても同じ問題が再発する。

#### 本文

**課題1: ハードウェア故障による可用性低下**
- 単一データセンター構成のため、ハードウェア障害がサービス停止に直結する → **利用者の業務が完全に停止**
- 大規模災害時のBCP対応（遠隔地バックアップ）も必要

**課題2: 月末アクセス集中**
- 月間100万アクセスのうち、90%が月末2営業日の営業時間（8時間）に集中
- ピーク時: 約31 req/sec、通常時: 約0.3 req/sec → **約100倍の差**
- ピーク性能に合わせたハードウェア構成のため、通常時は過剰投資となり**IT予算を圧迫**

**課題3: データベースの拡張性ボトルネック**
- 現状100GBのデータが、今後5年間で1,000GB（1TB）まで増加見込み
- データの90%が画像やPDFなどのバイナリデータ → RDBMSへの格納は非効率
- 30日を超えたデータは参照頻度が極めて低いが、法定保存期限の5年間保管が必要（取り出しに時間がかかっても可）
- **このままではDB容量上限に達し、サービス継続が困難になるリスク**

#### 図の仕様（デザイナー向け）

- レイアウト: 3つの課題カード（横並び）
- 各カードに定量データをハイライト表示
  - 課題2: 「ピーク/通常比 約100倍」
  - 課題3: 「データの90%がバイナリ」「100GB→1TB（5年で10倍増）」
- 評価観点（性能・可用性・コスト等）でカラーコード

---

### スライド5: 運用・可視化にも2つの構造的課題があり、クラウドネイティブアーキテクチャへの刷新が必要である

#### キーメッセージ

インフラ課題に加え、日常のオペレーション負荷とKPI可視化の欠如が、現行システムの構造的課題として残っている。これら5つの課題すべてを解決するには、クラウドネイティブアーキテクチャへの刷新が必要である。

#### 本文

**課題4: 日々のオペレーション負荷**
- セキュリティ監視、CVE確認、サーバー正常性監視、OSパッチ適用、ログローテーション、バックアップなど、日常的な運用作業が多岐にわたる
- **運用チームの工数が定常作業に占有され、改善・新機能開発に充てる余力がない**

**課題5: KPI可視化の欠如**
- システムおよびWebサービスのKPIが可視化されておらず、データに基づく意思決定ができていない
- **問題の早期発見ができず、障害の長期化やサービス品質低下を招くリスク**

**5つの課題の全体像:**

| # | 課題 | 関連する評価観点 |
|---|---|---|
| 1 | ハードウェア故障による可用性低下 | 可用性 |
| 2 | 月末アクセス集中とピークコスト | 性能・コスト・拡張性 |
| 3 | データベースの拡張性ボトルネック | 拡張性・コスト・性能 |
| 4 | 日々のオペレーション負荷 | セキュリティ・コスト |
| 5 | KPI可視化の欠如 | 可視化 |

→ ハードウェア更新ではなく、**クラウドネイティブアーキテクチャへの刷新**で5つの課題すべてを解決する。

#### 図の仕様（デザイナー向け）

- レイアウト: 上段に課題4・5のカード、下段に5課題の全体マッピング表
- 課題→評価観点の対応をカラーコードで視覚化
- 下部に「クラウドネイティブアーキテクチャへの刷新が必要」のキャッチコピー

---

### アジェンダ: ソリューション提案

```
現状と課題 ── ■ ソリューション ── コストと効果 ── 実施上の重要ポイント ── 長期戦略
                ↑ 現在地
```

---

## セクション3: ソリューション提案

---

### スライド6: AWSサーバーレス・マネージドサービスを中心としたクラウドネイティブアーキテクチャで全課題を解決する

#### キーメッセージ

サーバーレスとマネージドサービスを最大限活用し、ハードウェアの管理・運用から完全に解放されるNoOpsアーキテクチャを構築する。すべてのコンポーネントはMulti-AZ配置で高可用性を確保し、バイナリデータはS3 Pre-signed URLでアプリケーション層をオフロードする。

#### 本文

**提案アーキテクチャ全体像:**

- **認証**: Amazon Cognito（マネージド認証基盤、MFA対応）
- **CDN/WAF**: CloudFront + AWS WAF（AWS Managed Rules）
- **ロードバランサー**: ALB（Cognito JWT検証機能で認証をエッジで実施）
- **コンピュート**: ECS on Fargate（サーバーレスコンテナ、自動スケーリング）
- **データベース**: Aurora Serverless v2（自動スケーリング、Multi-AZ）
- **オブジェクトストレージ**: S3（バイナリデータの直接読み書き、ライフサイクル管理）
- **ダッシュボード**: S3ログ → Athena → QuickSight
- **CI/CD**: CodeCommit → CodeBuild → ECR → CodePipeline → CodeDeploy ECS Blue/Green
- **セキュリティ監視**: GuardDuty + CloudTrail

#### 図の仕様（デザイナー向け）

- レイアウト: フルシステムアーキテクチャ図（テキストは最小限、図中心）
- 左（ユーザー）→ 右（データ）の主要フロー:
  - ユーザー → CloudFront（CDN + WAF） → ALB（JWT検証） → ECS on Fargate → Aurora Serverless v2
- 上部に認証フロー:
  - ユーザー ↔ Cognito
- 下部にバイナリデータフロー（アプリ層をバイパス）:
  - ユーザー ↔ S3（Pre-signed URL）
- 右上にダッシュボードフロー:
  - S3ログ → Athena → QuickSight
- 左下にCI/CDフロー:
  - CodeCommit → CodeBuild → ECR → CodePipeline → CodeDeploy
- セキュリティ層をオーバーレイ:
  - WAF（エッジ）、GuardDuty、CloudTrail
- AZ境界を表示（2〜3 AZ）
- カラーコード: コンピュート（青）、ストレージ（緑）、セキュリティ（オレンジ）、監視（紫）

---

### スライド7: CloudFront + Fargate自動スケーリングにより、月末ピーク時でもレスポンス劣化なく対応する

#### キーメッセージ

コンピュート層（ECS on Fargate）は負荷に応じて自動的にスケールし、月末の約100倍のトラフィックスパイクにも追加のハードウェア調達なしで対応する。CloudFrontによる静的コンテンツのキャッシュでオリジンサーバーへの負荷をさらに削減する。通常時は最小構成で稼働し、従量課金でコストを最適化する。

#### 本文

**Before（現行）:**
- ピーク性能に合わせたハードウェアを常時稼働
- 月の大半（通常時）はリソースが過剰 → コスト浪費
- それでもピーク時はリソース不足のリスクが残る

**After（提案構成）:**
- **CloudFront**: 静的コンテンツをエッジでキャッシュし、オリジンへのリクエストを削減
- **ECS on Fargate**: タスク数がCPU/メモリ使用率に基づき自動スケール
  - 通常時: 最小タスク数で稼働（例: 2タスク）
  - ピーク時: 必要に応じて自動的にタスク数を増加（例: 20タスク）
  - ピーク後: 自動的に縮小して通常構成に戻る
- **従量課金**: Fargateはタスク稼働時間に対してのみ課金。通常時のコストを大幅に抑制。

**定量データ:**
- ピーク時: 90万アクセス / 8時間 ≒ 31 req/sec → Fargateタスク自動増加で対応
- 通常時: 10万アクセス / (20日×8時間) ≒ 0.3 req/sec → 最小構成で運用
- ピーク/通常比: 約100倍 → 固定構成ではピーク時のコストが通常時の100倍分のリソースを常時保持することになる

#### 図の仕様（デザイナー向け）

- レイアウト: Before/After比較（左右2段）
- 左（Before）: 固定サーバー群。通常時に「過剰投資」ラベル、ピーク時に「容量不足リスク」ラベル
- 右（After）: 時系列グラフ。X軸=1ヶ月の日付、Y軸=Fargateタスク数。月末にスパイク、通常時はフラット。コスト曲線をオーバーレイし、従量課金による節約を可視化。

---

### スライド8: Aurora Serverless v2により、データベースの容量・性能がワークロードに応じて自動調整される

#### キーメッセージ

Aurora Serverless v2はコンピュート（ACU）とストレージの両方を自動スケーリングする。月末ピーク時にはACUが自動増加し、通常時は最小構成に縮小する。Multi-AZ構成による自動フェイルオーバーで高可用性も確保する。5年後の1TBデータ増にもストレージが自動拡張で対応する。

#### 本文

**Before（現行）:**
- 固定スペックのDBサーバー
- 容量拡張は手動（ハードウェア増設 or リプレース）
- 単一障害点: DBサーバー故障時はサービス全体が停止

**After（提案構成）:**
- **ACU自動スケーリング**: 0.5 ACUから128 ACUまで、ワークロードに応じて自動調整
  - 通常時: 最小ACUで稼働 → コスト削減
  - ピーク時: ACUが自動増加 → 性能確保
- **ストレージ自動拡張**: 使用量に応じて自動的にストレージが拡張（最大128TB）
- **Multi-AZフェイルオーバー**: プライマリインスタンス障害時、通常30秒以内でスタンバイに自動切替

**補足:**
バイナリデータ（データ全体の90%）をS3にオフロードすることで、Aurora Serverless v2にはメタデータ（構造化データ）のみを格納する。5年後もデータベースサイズは管理可能な範囲（約100GB）に抑制される。

#### 図の仕様（デザイナー向け）

- レイアウト: Before/After比較
- 左（Before）: 単一DBサーバー。「100GB」「手動拡張」「単一障害点」ラベル
- 右（After）: Aurora Serverless v2。ACUゲージ（0.5〜128）、Multi-AZ図（プライマリ+スタンバイ）、ストレージバー（自動拡張表示）

---

### スライド9: S3 Pre-signed URLによりバイナリデータをオフロードし、アプリケーション負荷とDBボトルネックを同時に解消する

#### キーメッセージ

データの90%を占めるバイナリデータ（画像・PDF等）をS3に格納し、クライアントがPre-signed URLを使って直接読み書きする。アプリケーションサーバーとデータベースをバイナリデータの転送から完全に解放し、コンピュート・ネットワーク・ストレージの負荷を同時に削減する。

#### 本文

**Before（現行フロー）:**
1. クライアント → Webサーバー → APサーバー → DBサーバー（バイナリ格納）
2. すべてのデータ転送がアプリケーション層を経由
3. DBにバイナリを格納 → DBサイズ肥大化（100GB、うち90GBがバイナリ）

**After（提案フロー）:**
1. **アップロード**: クライアントがAPサーバーにPre-signed URL発行を要求 → APサーバーがURLを生成・返却 → クライアントがS3に直接アップロード
2. **ダウンロード**: クライアントがAPサーバーにPre-signed URL発行を要求 → APサーバーがURLを生成・返却 → クライアントがS3から直接ダウンロード
3. APサーバー・DBはメタデータ（ファイル名、サイズ、格納先等）のみを処理

**効果:**
- データ転送量の90%をアプリケーションサーバーからオフロード
- DBサイズ: 1TB想定 → 約100GB（メタデータのみ）に抑制
- アプリケーションサーバーのCPU・メモリ・ネットワーク帯域を大幅に節約
- S3は容量無制限であり、将来のデータ増にも対応

#### 図の仕様（デザイナー向け）

- レイアウト: Before/After（上下2段のフロー図）
- 上（Before）: クライアント → AP → DB。太い矢印で100%のデータフローを表現
- 下（After）: 2つのフロー
  - クライアント → AP（細い矢印: メタデータのみ、10%）
  - クライアント ↔ S3（太い矢印: バイナリデータ、90%）
- 矢印にデータ量の割合をラベル表示

---

### スライド10: S3ライフサイクルポリシーにより、5年間のデータ保管コストを最大92%削減する

#### キーメッセージ

S3のライフサイクルポリシーにより、データの参照頻度に応じて自動的にストレージクラスを階層化する。30日以内のアクティブデータは高速アクセス可能なS3 Standardに、それ以降は低コストのGlacierクラスに自動移行する。要件の「取り出しに時間がかかっても良い」に合致する。

#### 本文

**ライフサイクルフロー:**

| 期間 | ストレージクラス | 特徴 | コスト（GB/月） |
|---|---|---|---|
| 0〜30日 | S3 Standard | 高速アクセス、アクティブデータ向け | $0.025 |
| 31日〜1年 | S3 Glacier Instant Retrieval | 低頻度アクセス、ミリ秒取得 | $0.005 |
| 1年〜5年 | S3 Glacier Deep Archive | 最低コスト、取得に数時間 | $0.002 |

**コスト削減効果:**
- S3 Standard → S3 Glacier Deep Archive: **約92%のコスト削減**
- 要件「取り出しに時間がかかっても良い」に完全合致
- ライフサイクルポリシーは一度設定すれば自動実行 → 運用負荷ゼロ

**試算例（1TBを5年保管する場合）:**
- 全量S3 Standard保管: 約$25/月 × 60ヶ月 = $1,500
- ライフサイクル適用: アクティブ期間のみStandard、以降はDeep Archiveに自動移行 → 大幅なコスト削減

#### 図の仕様（デザイナー向け）

- レイアウト: タイムライン（左→右のプロセスフロー）
- 「アップロード」→「30日間 S3 Standard」→「S3 Glacier Instant Retrieval」→「S3 Glacier Deep Archive（5年保管）」
- 下部: コスト棒グラフ（各ストレージクラスのGB/月単価を比較）
- コールアウト: 「取り出しに時間がかかっても良い → 要件合致」

---

### スライド11: Go言語 + Distrolessイメージにより、コンテナの攻撃面を極小化する

#### キーメッセージ

コンテナイメージにGo言語の単一バイナリとDistrolessベースイメージを採用する。OS層やミドルウェアがほぼ存在しないため、CVE（脆弱性）の検知対象が大幅に減少し、攻撃面を極小化する。

#### 本文

**コンテナイメージ比較:**

| 項目 | 一般的なイメージ（Ubuntu + ランタイム） | Go + Distroless |
|---|---|---|
| イメージサイズ | 約500MB | 約10〜20MB |
| CVE対象パッケージ数 | 100以上（OS, ライブラリ, ツール） | 大幅削減（Go標準ライブラリのみ） |
| シェルアクセス | あり（攻撃者に利用されるリスク） | なし（シェル非搭載） |
| パッケージマネージャー | あり | なし |
| rootファイルシステム | 読み書き可能 | **read-only設定** |

#### 図の仕様（デザイナー向け）

- レイアウト: 左右比較
- 左（従来のコンテナイメージ）: 大きなボックスに多数のレイヤー（OS、ツール、ランタイム、ライブラリ、アプリ）
- 右（Go Distroless）: 小さなボックスに2レイヤーのみ（最小ベース、単一バイナリ）
- コールアウト: 「イメージサイズ: ~500MB → ~15MB」「CVE対象: 100+ → 大幅削減」

---

### スライド12: Distroless + read-only FSにより、セキュリティ運用工数を大幅に削減しNoOpsに貢献する

#### キーメッセージ

Distrolessとread-onlyファイルシステムの組み合わせにより、セキュリティ面と運用面の両方で効果を発揮する。攻撃の防止とCVE対応工数の削減を同時に実現し、NoOpsモデルに貢献する。

#### 本文

**セキュリティ面の効果:**
- **Distroless**: OS、シェル、パッケージマネージャーが含まれないため、攻撃面が極小化される
- **Read-only rootファイルシステム**: マルウェアの永続化を防止。実行時にファイルを書き込めない
- **Multi-Stage Build**: ビルドツールが本番イメージに含まれない

**運用面の効果:**
- CVE確認・パッチ適用の工数が大幅削減される（Go自体の更新のみ対応）
- イメージサイズが小さいため、CI/CDのビルド・デプロイが高速化
- NoOpsの実現に貢献

#### 図の仕様（デザイナー向け）

- レイアウト: 上下2段（セキュリティ効果 / 運用効果）
- 上段: セキュリティ効果のカード3枚（Distroless、read-only FS、Multi-Stage Build）
- 下段: 運用効果のカード3枚（CVE工数削減、デプロイ高速化、NoOps貢献）
- 各カードに効果を示すアイコンとキーワードを配置

---

### スライド13: WAF・GuardDuty・CloudTrailの多層防御により、エッジからデータ層まで自動的に保護する

#### キーメッセージ

AWS WAF、GuardDuty、CloudTrailを組み合わせた多層防御を構築する。すべてマネージドサービスのため、セキュリティ監視の自動化が実現する。

#### 本文

**多層防御アーキテクチャ:**

| 層 | サービス | 役割 |
|---|---|---|
| エッジ層 | CloudFront + AWS WAF（Managed Rules） | DDoS防御、OWASP Top 10対策、不正リクエストのブロック |
| 認証層 | ALB + Cognito JWT検証 | 未認証リクエストをアプリケーション到達前に遮断 |
| コンピュート層 | ECS on Fargate（read-only FS、SSHアクセスなし） | コンテナ内部への侵入・改ざんを防止 |
| 監視層 | GuardDuty | 機械学習ベースの脅威検出（不正アクセス、マルウェア通信等） |
| 監査層 | CloudTrail | 全APIコールの記録・監査証跡の保全 |

#### 図の仕様（デザイナー向け）

- レイアウト: 同心円の多層防御図（オニオンモデル）
- 最外層: CloudFront + WAF
- 次層: ALB + Cognito
- 次層: ECS Fargate（read-only）
- 中心: データ（Aurora + S3、暗号化）
- 側面パネル: GuardDuty + CloudTrail（監視オーバーレイ）

---

### スライド14: マネージドサービスにより、セキュリティ運用の大半を自動化しNoOpsを実現する

#### キーメッセージ

現行の手動によるセキュリティ監視・CVE確認・パッチ適用・バックアップを、マネージドサービスにより自動化する。運用チームはセキュリティ運用から解放される。

#### 本文

**Before/After:**

| 運用項目 | Before（手動） | After（マネージド） |
|---|---|---|
| セキュリティ監視 | 24/365の有人監視 | GuardDutyが自動検出・アラート |
| CVE確認 | 手動で定期確認 | Distrolessで対象大幅削減 + ECRイメージスキャン自動化 |
| OSパッチ適用 | 手動適用・再起動 | Fargateはマネージド基盤。OS管理不要 |
| ログ管理 | 手動ローテーション・保管 | CloudWatch Logs / S3で自動管理 |
| バックアップ | 手動実施 | Aurora自動バックアップ + S3バージョニング |

#### 図の仕様（デザイナー向け）

- レイアウト: Before/After運用チェックリスト
- 左（Before）: 手動作業の一覧（赤系アイコン）
- 右（After）: 自動化済みの項目に✓マーク（緑系アイコン）
- 各項目にAWSサービスアイコンを付記

---

### スライド15: Multi-AZ構成と自動フェイルオーバーにより、99.95%以上の可用性を確保する

#### キーメッセージ

すべてのコンポーネントをMulti-AZ（複数のアベイラビリティゾーン）に配置し、単一障害点を完全に排除する。各層で自動フェイルオーバーを実装し、障害時もサービスを継続する。遠隔地バックアップはAuroraはAWS Backup、S3はクロスリージョンレプリケーションで対応する。

#### 本文

**各層の可用性設計:**

| コンポーネント | 可用性設計 | SLA |
|---|---|---|
| CloudFront | グローバルエッジ、本質的に高可用 | 99.9% |
| ALB | Multi-AZ自動分散 | 99.99% |
| ECS on Fargate | タスクをAZ間に分散配置、異常タスク自動置換 | 99.99% |
| Aurora Serverless v2 | Multi-AZフェイルオーバー（通常30秒以内） | 99.99% |
| S3 | 99.999999999%の耐久性 | 99.99% |

**遠隔地バックアップ:**
- **Aurora**: AWS Backupによるクロスリージョンバックアップ
- **S3**: クロスリージョンレプリケーションで別リージョンに自動複製

#### 図の仕様（デザイナー向け）

- レイアウト: AWSリージョン図
- メインリージョン内に2〜3のAZを表示
- 各AZ内: Fargateタスク、Auroraインスタンス
- AZ間の自動フェイルオーバー矢印
- 別リージョンへのバックアップフローを表示:
  - Aurora → AWS Backup → 別リージョン
  - S3 → クロスリージョンレプリケーション → 別リージョン
- 各サービスのSLA値を付記

---

### スライド16: Cognito + ALBのJWT検証により、不正リクエストをアプリケーション到達前に遮断する

#### キーメッセージ

Amazon Cognitoでマネージド認証基盤を構築し、ALBレベルでJWT（JSON Web Token）を検証する。認証されていないリクエストはアプリケーションに到達する前に遮断される。

#### 本文

**認証フロー:**

1. ユーザーがCognitoに認証要求（ID/パスワード + MFA（オプション））
2. Cognitoが認証を検証し、JWTトークンを発行
3. クライアントがリクエストにJWTを付与して送信
4. ALBがJWTの署名と有効期限を検証
5. **有効な場合**: ALBがリクエストをFargateに転送
6. **無効な場合**: ALBが403 Forbiddenを返却（アプリケーションに到達しない）

#### 図の仕様（デザイナー向け）

- レイアウト: シーケンス図スタイル
- ユーザー → Cognito: 「認証要求」
- Cognito → ユーザー: 「JWT発行」
- ユーザー → ALB: 「リクエスト（JWT付き）」
- ALB: 「JWT検証」の分岐
  - 有効 → ALB → Fargate（正常フロー）
  - 無効 → ALB → ユーザー「403 Forbidden」（遮断フロー）
- コールアウト: 「アプリケーション到達前に不正リクエストを排除」

---

### スライド17: マネージド認証基盤により、認証の運用負荷ゼロとピーク時のスケーラビリティを両立する

#### キーメッセージ

Cognitoはフルマネージドサービスのため、認証インフラの構築・運用が不要である。認証基盤自体がスケーラブルなため、月末ピーク時にも認証がボトルネックにならない。

#### 本文

**マネージド認証基盤の効果:**

| 観点 | Before（自前認証基盤） | After（Cognito） |
|---|---|---|
| インフラ構築・運用 | 自前で構築・運用が必要 | **フルマネージド、運用ゼロ** |
| スケーラビリティ | 認証サーバーの増強が必要 | **自動スケール、ピーク時も対応** |
| セキュリティ強化 | MFA実装は追加開発が必要 | **MFA対応が標準機能** |
| 不正アクセス対策 | アプリ層で認証処理 | **ALBで遮断、アプリ負荷軽減** |

#### 図の仕様（デザイナー向け）

- レイアウト: Before/After比較表
- 4行の効果カードを配置
- 各カードにAWSサービスアイコンと改善効果を示す矢印

---

### スライド18: QuickSightダッシュボードにより、システムKPIをリアルタイムに可視化する

#### キーメッセージ

S3に蓄積されたアクセスログやアプリケーションログをAthenaでサーバーレスに分析し、QuickSightでリアルタイムのBIダッシュボードとして可視化する。データに基づく意思決定基盤を構築する。

#### 本文

**ダッシュボード構成:**

1. **データソース**: CloudFront / ALBアクセスログ、アプリケーションログ → S3に集約
2. **分析エンジン**: Amazon Athena（サーバーレスSQLクエリ）
   - S3上のデータを直接SQLで分析
   - サーバーの管理不要、クエリ実行時のみ課金
3. **ダッシュボード**: Amazon QuickSight
   - ブラウザベースのBIダッシュボード
   - リアルタイムに更新
   - 関係者への共有が容易

**可視化KPI例:**
- アクセス数の推移（日次・時間帯別・月末ピーク分析）
- レスポンスタイムの推移
- エラー率の推移
- リソース使用率（Fargate CPU/メモリ、Aurora ACU）
- ストレージ使用量の推移

#### 図の仕様（デザイナー向け）

- レイアウト: プロセスフロー + ダッシュボードモックアップ
- 左: データフロー（CloudFront/ALB/App → S3 → Athena → QuickSight）
- 右: QuickSightダッシュボードのモックアップ（グラフ数点のイメージ）

---

### アジェンダ: コストと効果

```
現状と課題 ── ソリューション ── ■ コストと効果 ── 実施上の重要ポイント ── 長期戦略
                                  ↑ 現在地
```

---

## セクション4: AWSランニングコストと効果

---

### スライド19: 従量課金モデルにより、月額ランニングコストを最適化する

#### キーメッセージ

AWSの従量課金モデルにより、ワークロードに応じたコスト最適化を実現する。ピーク構成を常時保持するオンプレミスに対し、通常時は最小構成で稼働し、ピーク時のみスケールアウトする。

#### 本文

**主要AWSサービスの月額コスト試算:**

| サービス | 通常時 | ピーク時（月末2日間） | 備考 |
|---|---|---|---|
| ECS on Fargate | 最小タスク構成 | タスク自動増加分のみ追加 | vCPU/メモリ × 稼働秒数 |
| Aurora Serverless v2 | 最小ACU | ACU自動増加分のみ追加 | ACU × 稼働時間 |
| S3 | 格納量に応じた課金 | - | ライフサイクルで階層化済み |
| CloudFront | 転送量に応じた課金 | キャッシュ効果あり | エッジキャッシュ |

**コスト最適化のポイント:**
- Fargate/Aurora: 通常時（月の約93%）は最小構成で稼働 → ピーク構成固定に比べ大幅な削減
- S3ライフサイクル: アーカイブデータは最大92%のストレージコスト削減
- マネージドサービス: 人件費（セキュリティ監視、パッチ適用等）のコスト削減効果

> 詳細な前提条件・全サービスの内訳は補足資料に記載

#### 図の仕様（デザイナー向け）

- レイアウト: コスト内訳の棒グラフ
- 主要4サービスの月額コスト（通常月 / ピーク月）の比較
- オンプレミスの固定費との比較線を重ねて表示

---

### スライド20: 6つの評価観点すべてにおいて、提案アーキテクチャにより現行システムから定量的に改善される

#### キーメッセージ

6つの評価観点すべてにおいて、現行システムから定量的に改善される。各観点でBefore/Afterと具体的な対応技術を明確に示し、提案アーキテクチャの効果を総括する。

#### 本文

| 評価観点 | Before（現行オンプレ） | After（AWS提案構成） | 改善ポイント |
|---|---|---|---|
| **性能** | 固定容量、ピーク時にリスク | Fargate/Aurora自動スケール + CloudFront CDN | ピーク時もレスポンス安定 |
| **可用性** | 単一DC、手動フェイルオーバー | Multi-AZ自動フェイルオーバー | SLA 99.95%以上 |
| **コスト** | ピーク構成の固定費用 | 従量課金 + S3階層化 | 通常時コスト大幅削減 |
| **拡張性** | DB 100GB上限、バイナリもDB格納 | S3容量無制限 + Aurora自動拡張 | 5年後1TBに対応 |
| **セキュリティ** | 手動監視・手動パッチ | マネージドWAF + GuardDuty + Distroless | 運用自動化、CVE大幅削減 |
| **可視化** | KPIダッシュボードなし | QuickSightリアルタイムダッシュボード | データ駆動の意思決定 |

#### 図の仕様（デザイナー向け）

- レイアウト: 6行の比較表（ComparisonTable）
- 列: 評価観点、Before、After、改善ポイント
- 各行を評価観点別にカラーコード
- 改善ポイント列に緑色の上向き矢印 + テキスト

---

### アジェンダ: 実施上の重要ポイント

```
現状と課題 ── ソリューション ── コストと効果 ── ■ 実施上の重要ポイント ── 長期戦略
                                                  ↑ 現在地
```

---

## セクション5: 実施上の重要ポイント

---

### スライド21: CI/CDパイプラインとBlue/Greenデプロイにより、ゼロダウンタイムで安全なリリースを実現する

#### キーメッセージ

CodePipelineによる完全自動化されたCI/CDパイプラインを構築する。Blue/Greenデプロイ + TestTrafficにより、本番環境に影響を与えずに新バージョンの検証を行い、問題があれば即座にロールバックする。手動承認ステップでガバナンスも確保する。

#### 本文

**CI/CDパイプラインフロー:**

1. **CodeCommit**: ソースコードのバージョン管理
2. **CodeBuild**: ビルド・テスト実行 → ECRへのコンテナイメージプッシュ
3. **CodePipeline**: パイプライン全体の統制。必要に応じて手動承認ステップを挟む
4. **CodeDeploy（ECS Blue/Green）**:
   - 新バージョンをGreen環境にデプロイ
   - TestTrafficをGreen環境にルーティングして検証
   - 検証OK → 本番トラフィックをGreenに切替
   - 問題発生 → Blue環境に即時ロールバック（ダウンタイムゼロ）

**ガバナンス:**
- 手動承認ステップにより、本番リリースの統制を維持する
- TestTrafficによる事前検証で、品質を確保する
- ロールバックは自動で、数分以内に完了する

#### 図の仕様（デザイナー向け）

- レイアウト: 横方向のプロセスフロー
- CodeCommit → CodeBuild → ECR → CodePipeline（「手動承認」ゲートアイコン） → CodeDeploy
- 下部: Blue/Green デプロイ図
  - ALBが2つのターゲットグループ（Blue/Green）にルーティング
  - TestTraffic %表示
  - ロールバック矢印（Green → Blue）

---

### スライド22: クラウド移行に伴うリスクを事前に特定し、対策を講じる

#### キーメッセージ

クラウド移行には技術的・運用的なリスクが伴う。主要なリスクを事前に特定し、それぞれに具体的な対策を講じることで、移行の成功確率を高める。

#### 本文

| リスク | 影響 | 対策 |
|---|---|---|
| **データ移行時のデータ不整合** | 移行後にデータ欠損・不整合が発生する | 移行前後のデータ件数・チェックサム照合を実施。段階的な移行（メタデータ→バイナリ）で影響範囲を限定 |
| **切り替え時のサービス停止** | 移行切替中にユーザーがサービスを利用できない | DNS切替（Route 53加重ルーティング）による段階的移行。問題時は即時切り戻し可能な構成 |
| **運用チームの習熟不足** | AWS環境の運用に不慣れでインシデント対応が遅延する | 移行前にAWSトレーニング実施。運用手順書の整備。移行後一定期間はサポート体制を強化 |
| **想定外のコスト増** | 従量課金の見積もりと実際のコストに乖離が生じる | AWS Cost Explorerで日次モニタリング。Budgetsアラートで閾値超過を即時検知 |

#### 図の仕様（デザイナー向け）

- レイアウト: 4行の課題・対策マッピング表
- 左列: リスク（黄色/赤色の警告アイコン）
- 中央列: 影響度
- 右列: 対策（緑色のチェックアイコン）

---

### アジェンダ: 長期戦略

```
現状と課題 ── ソリューション ── コストと効果 ── 実施上の重要ポイント ── ■ 長期戦略
                                                                          ↑ 現在地
```

---

## セクション6: 長期戦略

---

### スライド23: API設計により、外部システム連携やAIエージェント活用など将来の機能拡張に柔軟に対応する

#### キーメッセージ

本提案のアーキテクチャはフロントエンドとバックエンドが明確に分離されたAPI構成である。この設計により、将来的なAPI公開やAIエージェントからのMCP（Model Context Protocol）を通じたシステム利活用も視野に入る。

#### 本文

**アーキテクチャの拡張性:**
- **フロント・バック分離**: CloudFront + ALB + Fargate構成により、フロントエンドとバックエンドAPIが明確に分離されている
- **API提供基盤**: バックエンドはAPI形式で実装されるため、将来的な外部システム連携やAPI公開が容易
- **AIエージェント連携**: APIベースの設計により、将来的にAIエージェントからのMCPを通じたシステム利活用も可能

**AWSマネージドサービスの継続的進化:**
- AWSが継続的にサービスを改善・機能追加
- 最新のセキュリティパッチが自動適用
- 新機能の追加はサービス設定の変更のみで対応可能

#### 図の仕様（デザイナー向け）

- レイアウト: 現在のアーキテクチャ + 将来の拡張方向
- 中央: 現在のアーキテクチャ（簡略版）
- 右に拡張矢印:
  - API公開（外部システム連携）
  - AIエージェント連携（MCP）
- 下部にAWSサービス進化のメリットを記載

---

### スライド24: IaCによりインフラ構成をコード管理し、環境の再現性と変更管理を確保する

#### キーメッセージ

Infrastructure as Code（IaC）によりインフラ構成をコード管理する。環境の再現性、変更管理の統制、ドリフト検知を実現し、インフラ運用の品質と安全性を確保する。

#### 本文

**IaC（Infrastructure as Code）の効果:**

| 観点 | Before（手動管理） | After（IaC） |
|---|---|---|
| 環境構築 | 手動で個別構築、手順書依存 | **同一コードから開発・ステージング・本番を構築** |
| 変更管理 | 変更履歴が不明確 | **コードレビュー + CI/CDで統制** |
| 構成ドリフト | 手動変更が蓄積し構成が不明に | **ドリフト検知で差分を自動検出・是正** |
| 障害復旧 | 手順書に基づく手動復旧 | **コードから環境を再構築** |

**採用ツール:**
- CloudFormation / CDKでインフラ構成を定義
- CI/CDパイプラインと連携し、インフラ変更も自動テスト・デプロイ

#### 図の仕様（デザイナー向け）

- レイアウト: IaCによるインフラ管理フロー
- コード（CDK） → コードレビュー → CI/CDパイプライン → 環境デプロイ（Dev / Stg / Prod）
- ドリフト検知のフィードバックループを矢印で表現

---

## まとめ

---

### スライド25: 評価項目No.5に対する回答の総括 — AWSサーバーレス構成で6つの評価観点すべてを満たす

#### 対象評価項目（再掲）

> **評価項目No.5**: 本システム実現のための最適なクラウドアーキテクチャの提案ができているか。次の観点を含むこと。
> **性能 / 可用性 / コスト / 拡張性 / セキュリティ / 可視化**

#### キーメッセージ

本提案は、評価項目No.5が求める6つの評価観点すべてに対し、AWSサーバーレス・マネージドサービスによる最適なクラウドアーキテクチャで回答する。

#### 本文

**評価項目No.5 — 6つの評価観点に対する回答一覧:**

| 評価観点 | 本提案での回答 | 該当スライド |
|---|---|---|
| **性能** | Fargate/Aurora自動スケール + CloudFront CDNでピーク約100倍でも安定。S3オフロードで転送量90%削減 | 7, 8, 9 |
| **可用性** | 全層Multi-AZ + 自動フェイルオーバーでSLA 99.95%以上。クロスリージョンバックアップ対応 | 15, 21 |
| **コスト** | 従量課金で通常時コスト大幅削減。S3階層化で保管コスト最大92%削減 | 7, 10, 19 |
| **拡張性** | S3容量無制限 + Aurora自動拡張。バイナリオフロードでDB 1/10。5年後1TB対応 | 8, 9, 10 |
| **セキュリティ** | WAF + GuardDuty + CloudTrailの多層防御。Distroless + read-only FSでCVE大幅削減 | 11-14, 16 |
| **可視化** | S3ログ → Athena → QuickSightでリアルタイムBIダッシュボードを構築 | 18 |

**結論:**

本提案のAWSサーバーレス・マネージドサービス構成は、評価項目No.5が求める「本システム実現のための最適なクラウドアーキテクチャ」を、6つの評価観点すべてにおいて実現する。

#### 図の仕様（デザイナー向け）

- 上部: 評価項目No.5の引用ボックス（スライド1と同じ書式）
- レイアウト: 6行の回答一覧表
- 列: 評価観点（カラーバッジ）、回答要旨、該当スライド番号
- 下部: 結論テキスト（太字・強調表示）
- スライド1と対になる構成にし、冒頭と末尾で評価項目への回答を挟み込む

---

## 補足資料（Appendix）

---

### 補足A: AWS各サービスのSLA一覧

| サービス | SLA（月間稼働率） | 補足 |
|---|---|---|
| Amazon CloudFront | 99.9% | グローバルエッジネットワーク |
| Elastic Load Balancing (ALB) | 99.99% | Multi-AZ自動分散 |
| Amazon ECS on Fargate | 99.99% | Multi-AZタスク配置 |
| Amazon Aurora | 99.99% | Multi-AZフェイルオーバー |
| Amazon S3 | 99.99%（可用性）/ 99.999999999%（耐久性） | イレブンナインの耐久性 |
| Amazon Cognito | 99.9% | マネージド認証 |
| AWS WAF | CloudFrontまたはALBのSLAに準ずる | - |
| Amazon GuardDuty | リージョン内の高可用性 | マネージド脅威検出 |

---

### 補足B: S3ストレージクラス別コスト詳細

| ストレージクラス | 保管コスト（GB/月） | 取得コスト | 最低保管期間 | 取得時間 |
|---|---|---|---|---|
| S3 Standard | $0.025 | 無料 | なし | ミリ秒 |
| S3 Standard-IA | $0.0138 | $0.01/GB | 30日 | ミリ秒 |
| S3 Glacier Instant Retrieval | $0.005 | $0.03/GB | 90日 | ミリ秒 |
| S3 Glacier Flexible Retrieval | $0.0045 | $0.01/GB（標準） | 90日 | 数分〜数時間 |
| S3 Glacier Deep Archive | $0.002 | $0.02/GB（標準） | 180日 | 12時間以内 |

> 料金は東京リージョン（ap-northeast-1）の参考値。最新の料金はAWS公式サイトを参照。

---

### 補足C: AWSランニングコスト試算の前提条件と全サービス内訳

**前提条件:**
- リージョン: 東京（ap-northeast-1）
- 月間アクセス数: 100万リクエスト
- データ量: 初年度100GB、5年後1TB
- バイナリデータ比率: 90%
- ピーク時トラフィック: 月末2営業日の営業時間（8時間）に月間アクセスの90%が集中

**各サービスの試算根拠:**

| サービス | サイジング前提 | 概算月額 |
|---|---|---|
| ECS on Fargate | 通常時: 0.5vCPU/1GBメモリ × 2タスク、ピーク時: × 10〜20タスク | [要見積] |
| Aurora Serverless v2 | 通常時: 0.5 ACU、ピーク時: 4〜8 ACU | [要見積] |
| S3 | 初年度: 100GB（Standard + ライフサイクル移行） | [要見積] |
| CloudFront | 月間データ転送量に依存 | [要見積] |
| ALB | 固定費 + LCU課金 | [要見積] |
| Cognito | MAU（月間アクティブユーザー）課金。50,000 MAUまで無料枠 | [要見積] |
| WAF | WebACL + ルール数 + リクエスト数。Managed Rulesは月額固定 | [要見積] |
| GuardDuty | 分析データ量に応じた課金。30日無料トライアルあり | [要見積] |
| QuickSight | ユーザー数課金。Author/Reader別の料金体系 | [要見積] |
| CodePipeline/Build/Deploy | パイプライン実行回数課金 | [要見積] |

> 詳細な見積もりはAWS Pricing Calculatorを用いて別途算出する。

---

### 補足D: セキュリティ対策の詳細マッピング

| 脅威カテゴリ | 対策 | AWSサービス |
|---|---|---|
| DDoS攻撃 | エッジでの遮断、レート制限 | CloudFront + AWS Shield Standard |
| SQLインジェクション / XSS | WAFルールによる検知・遮断 | AWS WAF（Managed Rules） |
| 不正アクセス | JWT認証、MFA | Cognito + ALB |
| コンテナへの侵入 | read-only FS、シェルなし、SSHなし | Fargate + Distroless |
| 内部脅威・異常行動 | 機械学習ベースの異常検知 | GuardDuty |
| 監査証跡 | 全APIコールの記録 | CloudTrail |
| データ暗号化 | 保管時・転送時の暗号化 | S3 SSE、Aurora暗号化、ACM(TLS) |
| 脆弱性管理 | コンテナイメージスキャン | ECRイメージスキャン |

**WAF SOCオプション:**
- AWS Managed Rulesで主要な攻撃パターンに対応
- より高度なWAF運用（カスタムルール管理、24/365監視、インシデント対応）が必要な場合、WafCharm等のSOCサービスの導入を検討

---

### 補足E: Go + Distrolessのベンチマーク比較

**コンテナイメージサイズ比較:**

| ベースイメージ | イメージサイズ | 備考 |
|---|---|---|
| Ubuntu 22.04 + Go runtime | 約800MB | フルOS + ツール群 |
| Alpine + Go runtime | 約300MB | 軽量Linux |
| golang:alpine (multi-stage) | 約15MB | ビルドステージ分離 |
| **gcr.io/distroless/static (multi-stage)** | **約10MB** | **OS/シェルなし、最小構成** |

**Multi-Stage Buildフロー:**

```
Stage 1 (Builder):
  golang:alpine → ソースコード取得 → go build → 単一バイナリ生成

Stage 2 (Production):
  gcr.io/distroless/static → 単一バイナリのみコピー → 最終イメージ
```

**セキュリティ比較（CVE検知数の目安）:**

| ベースイメージ | 一般的なCVE検知数 | 備考 |
|---|---|---|
| Ubuntu 22.04 | 50〜200件 | OS・ライブラリの脆弱性を含む |
| Alpine | 10〜30件 | 軽量だがmusl libc等の脆弱性 |
| **Distroless** | **極少**（Go標準ライブラリ依存のみ） | OS層の脆弱性がほぼゼロ |
